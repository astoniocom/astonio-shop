/*!
 * Ventus 0.2.1
 * Copyright © 2015 Ramón Lamana
 * http://www.rlamana.com
 */
!function(t,e){"function"==typeof define&&define.amd?define(["$"],e):t.Ventus=e(t.$)}(this,function(t){var e,n,i;return function(t){function r(t,e){var n,i,r,s,o,a,u,c,l,f,h=e&&e.split("/"),p=m.map,d=p&&p["*"]||{};if(t&&"."===t.charAt(0)&&e){for(h=h.slice(0,h.length-1),t=h.concat(t.split("/")),c=0;f=t[c];c++)if("."===f)t.splice(c,1),c-=1;else if(".."===f){if(1===c&&(".."===t[2]||".."===t[0]))return!0;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}if((h||d)&&p){for(n=t.split("/"),c=n.length;c>0;c-=1){if(i=n.slice(0,c).join("/"),h)for(l=h.length;l>0;l-=1)if(r=p[h.slice(0,l).join("/")],r&&(r=r[i])){s=r,o=c;break}if(s)break;!a&&d&&d[i]&&(a=d[i],u=c)}!s&&a&&(s=a,o=u),s&&(n.splice(0,o,s),t=n.join("/"))}return t}function s(e,n){return function(){return h.apply(t,g.call(arguments,0).concat([e,n]))}}function o(t){return function(e){return r(e,t)}}function a(t){return function(e){p[t]=e}}function u(e){if(d.hasOwnProperty(e)){var n=d[e];delete d[e],v[e]=!0,f.apply(t,n)}if(!p.hasOwnProperty(e))throw new Error("No "+e);return p[e]}function c(t,e){var n,i,s=t.indexOf("!");return-1!==s?(n=r(t.slice(0,s),e),t=t.slice(s+1),i=u(n),t=i&&i.normalize?i.normalize(t,o(e)):r(t,e)):t=r(t,e),{f:n?n+"!"+t:t,n:t,p:i}}function l(t){return function(){return m&&m.config&&m.config[t]||{}}}var f,h,p={},d={},m={},v={},g=[].slice;f=function(e,n,i,r){var o,f,h,m,g,w,b=[];if(r=r||e,"function"==typeof i){for(n=!n.length&&i.length?["require","exports","module"]:n,w=0;w<n.length;w++)if(g=c(n[w],r),h=g.f,"require"===h)b[w]=s(e);else if("exports"===h)b[w]=p[e]={},o=!0;else if("module"===h)f=b[w]={id:e,uri:"",exports:p[e],config:l(e)};else if(p.hasOwnProperty(h)||d.hasOwnProperty(h))b[w]=u(h);else if(g.p)g.p.load(g.n,s(r,!0),a(h),{}),b[w]=p[h];else if(!v[h])throw new Error(e+" missing "+h);m=i.apply(p[e],b),e&&(f&&f.exports!==t&&f.exports!==p[e]?p[e]=f.exports:m===t&&o||(p[e]=m))}else e&&(p[e]=i)},e=n=h=function(e,n,i,r){return"string"==typeof e?u(c(e,n).f):(e.splice||(m=e,n.splice?(e=n,n=i,i=null):e=t),n=n||function(){},r?f(t,e,n,i):setTimeout(function(){f(t,e,n,i)},15),h)},h.config=function(t){return m=t,h},i=function(t,e,n){e.splice||(n=e,e=[]),d[t]=[t,e,n]},i.amd={jQuery:!0}}(),i("almond",[],function(){}),function(t,e){"function"==typeof i&&i.amd?i("handlebars",[],e):"object"==typeof exports?module.exports=e():t.Handlebars=t.Handlebars||e()}(this,function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return u[t]}function n(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}function i(t){return t instanceof a?t.toString():null==t?"":t?(t=""+t,l.test(t)?t.replace(c,e):t):t+""}function r(t){return t||0===t?p(t)&&0===t.length?!0:!1:!0}function s(t,e){return(t?t+".":"")+e}var o={},a=t,u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,l=/[&<>"'`]/;o.extend=n;var f=Object.prototype.toString;o.toString=f;var h=function(t){return"function"==typeof t};h(/x/)&&(h=function(t){return"function"==typeof t&&"[object Function]"===f.call(t)});var h;o.isFunction=h;var p=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===f.call(t):!1};return o.isArray=p,o.escapeExpression=i,o.isEmpty=r,o.appendContextPath=s,o}(t),n=function(){"use strict";function t(t,e){var i;e&&e.firstLine&&(i=e.firstLine,t+=" - "+i+":"+e.firstColumn);for(var r=Error.prototype.constructor.call(this,t),s=0;s<n.length;s++)this[n[s]]=r[n[s]];i&&(this.lineNumber=i,this.column=e.firstColumn)}var e,n=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),i=function(t,e){"use strict";function n(t,e){this.helpers=t||{},this.partials=e||{},i(this)}function i(t){t.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new o("Missing helper: '"+arguments[arguments.length-1].name+"'")}),t.registerHelper("blockHelperMissing",function(e,n){var i=n.inverse,r=n.fn;if(e===!0)return r(this);if(e===!1||null==e)return i(this);if(l(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):i(this);if(n.data&&n.ids){var o=v(n.data);o.contextPath=s.appendContextPath(n.data.contextPath,n.name),n={data:o}}return r(e,n)}),t.registerHelper("each",function(t,e){if(!e)throw new o("Must pass iterator to #each");var n,i,r=e.fn,a=e.inverse,u=0,c="";if(e.data&&e.ids&&(i=s.appendContextPath(e.data.contextPath,e.ids[0])+"."),f(t)&&(t=t.call(this)),e.data&&(n=v(e.data)),t&&"object"==typeof t)if(l(t))for(var h=t.length;h>u;u++)n&&(n.index=u,n.first=0===u,n.last=u===t.length-1,i&&(n.contextPath=i+u)),c+=r(t[u],{data:n});else for(var p in t)t.hasOwnProperty(p)&&(n&&(n.key=p,n.index=u,n.first=0===u,i&&(n.contextPath=i+p)),c+=r(t[p],{data:n}),u++);return 0===u&&(c=a(this)),c}),t.registerHelper("if",function(t,e){return f(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||s.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,n){return t.helpers["if"].call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),t.registerHelper("with",function(t,e){f(t)&&(t=t.call(this));var n=e.fn;if(s.isEmpty(t))return e.inverse(this);if(e.data&&e.ids){var i=v(e.data);i.contextPath=s.appendContextPath(e.data.contextPath,e.ids[0]),e={data:i}}return n(t,e)}),t.registerHelper("log",function(e,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;t.log(i,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]})}var r={},s=t,o=e,a="2.0.0";r.VERSION=a;var u=6;r.COMPILER_REVISION=u;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};r.REVISION_CHANGES=c;var l=s.isArray,f=s.isFunction,h=s.toString,p="[object Object]";r.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:d,log:m,registerHelper:function(t,e){if(h.call(t)===p){if(e)throw new o("Arg not supported with multiple helpers");s.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){h.call(t)===p?s.extend(this.partials,t):this.partials[t]=e},unregisterPartial:function(t){delete this.partials[t]}};var d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(d.level<=t){var n=d.methodMap[t];"undefined"!=typeof console&&console[n]&&console[n].call(console,e)}}};r.logger=d;var m=d.log;r.log=m;var v=function(t){var e=s.extend({},t);return e._parent=t,e};return r.createFrame=v,r}(e,n),r=function(t,e,n){"use strict";function i(t){var e=t&&t[0]||1,n=h;if(e!==n){if(n>e){var i=p[n],r=p[e];throw new f("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new f("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function r(t,e){if(!e)throw new f("No environment passed to template");if(!t||!t.main)throw new f("Unknown template object: "+typeof t);e.VM.checkRevision(t.compiler);var n=function(n,i,r,s,o,a,u,c,h){o&&(s=l.extend({},s,o));var p=e.VM.invokePartial.call(this,n,r,s,a,u,c,h);if(null==p&&e.compile){var d={helpers:a,partials:u,data:c,depths:h};u[r]=e.compile(n,{data:void 0!==c,compat:t.compat},e),p=u[r](s,d)}if(null!=p){if(i){for(var m=p.split("\n"),v=0,g=m.length;g>v&&(m[v]||v+1!==g);v++)m[v]=i+m[v];p=m.join("\n")}return p}throw new f("The partial "+r+" could not be compiled when running in runtime-only mode")},i={lookup:function(t,e){for(var n=t.length,i=0;n>i;i++)if(t[i]&&null!=t[i][e])return t[i][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:l.escapeExpression,invokePartial:n,fn:function(e){return t[e]},programs:[],program:function(t,e,n){var i=this.programs[t],r=this.fn(t);return e||n?i=s(this,t,r,e,n):i||(i=this.programs[t]=s(this,t,r)),i},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=l.extend({},e,t)),n},noop:e.VM.noop,compilerInfo:t.compiler},r=function(e,n){n=n||{};var s=n.data;r._setup(n),!n.partial&&t.useData&&(s=u(e,s));var o;return t.useDepths&&(o=n.depths?[e].concat(n.depths):[e]),t.main.call(i,e,i.helpers,i.partials,s,o)};return r.isTop=!0,r._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,e.helpers),t.usePartial&&(i.partials=i.merge(n.partials,e.partials)))},r._child=function(e,n,r){if(t.useDepths&&!r)throw new f("must pass parent depths");return s(i,e,t[e],n,r)},r}function s(t,e,n,i,r){var s=function(e,s){return s=s||{},n.call(t,e,t.helpers,t.partials,s.data||i,r&&[e].concat(r))};return s.program=e,s.depth=r?r.length:0,s}function o(t,e,n,i,r,s,o){var a={partial:!0,helpers:i,partials:r,data:s,depths:o};if(void 0===t)throw new f("The partial "+e+" could not be found");return t instanceof Function?t(n,a):void 0}function a(){return""}function u(t,e){return e&&"root"in e||(e=e?d(e):{},e.root=t),e}var c={},l=t,f=e,h=n.COMPILER_REVISION,p=n.REVISION_CHANGES,d=n.createFrame;return c.checkRevision=i,c.template=r,c.program=s,c.invokePartial=o,c.noop=a,c}(e,n,i),s=function(t,e,n,i,r){"use strict";var s,o=t,a=e,u=n,c=i,l=r,f=function(){var t=new o.HandlebarsEnvironment;return c.extend(t,o),t.SafeString=a,t.Exception=u,t.Utils=c,t.escapeExpression=c.escapeExpression,t.VM=l,t.template=function(e){return l.template(e,t)},t},h=f();return h.create=f,h["default"]=h,s=h}(i,t,n,e,r);return s}),i("ventus/core/events",[],function(){"use strict";var t=/^(?:(.*)\s)?(\w+)$/,e={register:function(e,n,i){var r,s,o,a;for(var u in n)if(n.hasOwnProperty(u)){if(r=n[u],s=u.match(t),o=s[1],a=s[2],"string"==typeof r&&(r=i[r]),!r)throw new Error("Handler not found");o?e.querySelectorAll(o).forEach(function(t){t.addEventListener(a,r.bind(i))}):e.addEventListener(a,r.bind(i))}return e},onTransitionEnd:function(t,e,n){var i=function(){t.removeEventListener("transitionend",i),e.apply(n)}.bind(n);t.addEventListener("transitionend",i)},onAnimationEnd:function(t,e,n){var i=function(){t.removeEventListener("animationend",i),e.apply(n)}.bind(n);t.addEventListener("animationend",i)}};return e}),i("ventus/core/emitter",[],function(){"use strict";function t(t,e,n){return function(i){return(i.funct===t&&i.scope===e)===n}}function e(e,n,i,r){return e[n]?e[n].some(t(i,r,!0)):!1}function n(){this._listeners={}}return n.prototype={listenersCount:function(t){var e=this._listeners[t];return e?e.length:0},on:function(t,n,i){var r=this._listeners;e(r,t,n,i)||(r[t]||(r[t]=[]),r[t].push({funct:n,scope:i}))},off:function(e,n,i){var r=this._listeners[e];r&&(this._listeners[e]=r.filter(t(n,i,!1)))},once:function(t,n,i){e(this._listeners,t,n,i)||this.on(t,function r(){this.off(t,r,this),n.apply(i,arguments)},this)},emit:function(t){var e=this._listeners[t];if(e){var n=Array.prototype.slice.call(arguments,1);e.forEach(function(t){t.funct.apply(t.scope,n)})}},connect:function(t,e){if(t)for(var n in t)t.hasOwnProperty(n)&&this.on(n,t[n],e)},disconnect:function(t,e){if(t)for(var n in t)t.hasOwnProperty(n)&&this.off(n,t[n],e)}},n}),i("ventus/tpl/window",["handlebars"],function(t){return t.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,n,i){var r,s="function",o=e.helperMissing,a=this.escapeExpression;return'<div class="wm-window '+a((r=null!=(r=e.classname||(null!=t?t.classname:t))?r:o,typeof r===s?r.call(t,{name:"classname",hash:{},data:i}):r))+'">\n	<div class="wm-window-box">\n		<header class="wm-window-title" unselectable="on">\n			<h1 unselectable="on">'+a((r=null!=(r=e.title||(null!=t?t.title:t))?r:o,typeof r===s?r.call(t,{name:"title",hash:{},data:i}):r))+'</h1>\n			<div class="wm-button-group">\n				<button class="wm-minimize">&nbsp;</button>\n				<button class="wm-maximize">&nbsp;</button>\n				<button class="wm-close">&nbsp;</button>\n			</div>\n		</header>\n\n		<section class="wm-content"></section>\n\n		<button class="wm-resize">&nbsp;</button>\n	</div>\n	<div class="wm-window-overlay"></div>\n</div>\n'},useData:!0})}),i("ventus/wm/window",["ventus/core/events","ventus/core/emitter","ventus/tpl/window"],function(t,e,n){"use strict";function i(t){return!!window.TouchEvent&&t.originalEvent instanceof window.TouchEvent}function r(t){return i(t)?t.originalEvent.changedTouches[0]:t}var s=function(i){this.signals=new e,i=i||{title:"Untitle Window",width:400,height:200,x:0,y:0,content:"",movable:!0,resizable:!0,widget:!1,titlebar:!0};var r=document.createElement("template");if(r.innerHTML=n({title:i.title,classname:i.classname||""}),this.$el=r.content.children[0],t.register(this.$el,this.events.window,this),i.opacity&&(this.$el.opacity=i.opacity),i.events)for(var s in i.events)i.events.hasOwnProperty(s)&&"function"==typeof i.events[s]&&this.signals.on(s,i.events[s],this);this.$content=this.$el.querySelector(".wm-content"),i.content&&this.$content.appendChild(i.content),this.$titlebar=this.$el.querySelector("header"),this.width=i.width||400,this.height=i.height||200,this.x=i.x||0,this.y=i.y||0,this.z=1e4,this.enabled=!0,this.active=!1,this.maximized=!1,this.minimized=!1,this._closed=!0,this._destroyed=!1,this.widget=!1,this.movable=!0,this.resizable="undefined"!=typeof i.resizable?i.resizable:!0,this.titlebar=!0};return s.prototype={_restore:null,_moving:null,_resizing:null,slots:{move:function(t){var e=r(t);this.enabled&&this.movable&&(this._moving=this.toLocal({x:e.pageX,y:e.pageY}),this.$el.classList.add("move"),t.preventDefault())}},events:{window:{click:function(t){this.signals.emit("select",this,t)},mousedown:function(t){this.focus(),this.widget&&this.slots.move.call(this,t)},".wm-content click":function(t){this.enabled&&this.signals.emit("click",this,t)},".wm-window-title mousedown":function(t){this.slots.move.call(this,t)},".wm-window-title dblclick":function(){this.enabled&&this.resizable&&this.maximize()},".wm-window-title button.wm-close click":function(t){t.stopPropagation(),t.preventDefault(),this.enabled&&this.close()},".wm-window-title button.wm-maximize click":function(t){t.stopPropagation(),t.preventDefault(),this.enabled&&this.resizable&&this.maximize()},".wm-window-title button.wm-minimize click":function(t){t.stopPropagation(),t.preventDefault(),this.enabled&&this.minimize()},".wm-window-title button mousedown":function(t){this.focus(),t.stopPropagation(),t.preventDefault()},"button.wm-resize mousedown":function(t){var e=r(t);this.enabled&&this.resizable&&(this._resizing={width:this.width-e.pageX,height:this.height-e.pageY},this.$el.classList.add("resizing"),t.preventDefault())}},space:{mousemove:function(t){var e=r(t);i(t)||1===t.which||(this._moving&&this._stopMove(),this._resizing&&this._stopResize()),this._moving&&this.move(e.pageX-this._moving.x,e.pageY-this._moving.y),this._resizing&&this.resize(e.pageX+this._resizing.width,e.pageY+this._resizing.height)},mouseup:function(){this._moving&&this._stopMove(),this._resizing&&this._stopResize()}}},_stopMove:function(){this.$el.classList.remove("move"),this._moving=null},_stopResize:function(){this.$el.classList.remove("resizing"),this._restore=null,this._resizing=null},set manager(e){return e.createWindow?(this._windowManager=e,this.$space=e.$el,e.$el.appendChild(this.$el),void t.register(e.$el,this.events.space,this)):void console.error("The given space element is not a valid WindowManager")},get manager(){return this._windowManager},get maximized(){return this._maximized},set maximized(t){t?(this._restoreMaximized=this.stamp(),this.signals.emit("maximize",this,this._restoreMaximized)):this.signals.emit("restore",this,this._restoreMaximized),this._maximized=t},get minimized(){return this._minimized},set minimized(t){t?(this._restoreMinimized=this.stamp(),this.signals.emit("minimize",this,this._restoreMinimized)):this.signals.emit("restore",this,this._restoreMinimized),this._minimized=t},set active(t){t?(this.signals.emit("focus",this),this.$el.classList.add("active"),this.$el.classList.remove("inactive")):(this.signals.emit("blur",this),this.$el.classList.remove("active"),this.$el.classList.add("inactive")),this._active=t},get active(){return this._active},set enabled(t){t?this.$el.classList.remove("disabled"):this.$el.classList.add("disabled"),this._enabled=t},get enabled(){return this._enabled},set movable(t){this._movable=!!t},get movable(){return this._movable},set resizable(t){t?this.$el.classList.remove("noresizable"):this.$el.classList.add("noresizable"),this._resizable=!!t},get resizable(){return this._resizable},set closed(t){},get closed(){return this._closed},set destroyed(t){},get destroyed(){return this._destroyed},set widget(t){this._widget=t},get widget(){return this._widget},set titlebar(t){t?this.$titlebar.classList.remove("hide"):this.$titlebar.classList.add("hide"),this._titlebar=t},get titlebar(){return this._titlebar},set width(t){this.$el.style.width=t+"px"},get width(){return parseInt(this.$el.style.width||0,10)},set height(t){this.$el.style.height=t+"px"},get height(){return parseInt(this.$el.style.height||0,10)},set x(t){this.$el.style.left=t+"px"},set y(t){this.$el.style.top=t+"px"},get x(){return parseInt(this.$el.style.left||0,10)},get y(){return parseInt(this.$el.style.top||0,10)},set z(t){this.$el.style.zIndex=t},get z(){return parseInt(this.$el.style.zIndex||0,10)},open:function(){return new Promise(function(e){this.signals.emit("open",this),this.$el.style.display="block",this.$el.classList.add("opening"),t.onAnimationEnd(this.$el,function(){this.$el.classList.remove("opening"),e()},this),this._closed=!1}.bind(this))},close:function(){return new Promise(function(e){this.signals.emit("close",this),this.$el.classList.add("closing"),t.onAnimationEnd(this.$el,function(){this.$el.classList.remove("closing"),this.$el.classList.add("closed"),this.$el.style.display="none",this.signals.emit("closed",this),e()},this),this._closed=!0}.bind(this))},destroy:function(){var t=function(){this.$content.innerHTML="",this.signals.emit("destroyed",this),this._destroyed=!0}.bind(this);this.signals.emit("destroy",this),this.closed?t():this.close().then(function(){t()})},resize:function(t,e){return this.width=t,this.height=e,this},move:function(t,e){return this.x=t,this.y=e,this},stamp:function(){return this.restore=function(){var t={width:this.width,height:this.height},e={x:this.x,y:this.y};return function(){return this.resize(t.width,t.height),this.move(e.x,e.y),this}}.apply(this),this.restore},restore:function(){},maximize:function(){return this.$el.classList.add("maximizing"),t.onTransitionEnd(this.$el,function(){this.$el.classList.remove("maximizing")},this),this.maximized=!this.maximized,this},minimize:function(){return this.$el.classList.add("minimizing"),t.onTransitionEnd(this.$el,function(){this.$el.classList.remove("minimizing")},this),this.minimized=!this.minimized,this},focus:function(){return this.active=!0,this},blur:function(){return this.active=!1,this},toLocal:function(t){return{x:t.x-this.x,y:t.y-this.y}},toGlobal:function(t){return{x:t.x+this.x,y:t.y+this.y}},append:function(t){t.appendChild(this.$content)}},s}),i("ventus/wm/modes/default",[],function(){"use strict";var t={register:function(){console.log("Default mode registered.")},plug:function(){},unplug:function(){},actions:{maximize:function(t){t.move(0,0),t.$el.style.transform="translate3d(0, 0, 0);",setTimeout(function(){t.resize(this.$el.offsetWidth,this.$el.offsetHeight)}.bind(this),0)},restore:function(t,e){e.call(t)},minimize:function(t){t.resize(0,0)}}};return t}),function(){var t=this,e=t._,n={},i=Array.prototype,r=Object.prototype,s=Function.prototype,o=i.push,a=i.slice,u=i.concat,c=r.toString,l=r.hasOwnProperty,f=i.forEach,h=i.map,p=i.reduce,d=i.reduceRight,m=i.filter,v=i.every,g=i.some,w=i.indexOf,b=i.lastIndexOf,y=Array.isArray,x=Object.keys,j=s.bind,_=function(t){return t instanceof _?t:this instanceof _?void(this._wrapped=t):new _(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=_),exports._=_):t._=_,_.VERSION="1.4.4";var $=_.each=_.forEach=function(t,e,i){if(null!=t)if(f&&t.forEach===f)t.forEach(e,i);else if(t.length===+t.length){for(var r=0,s=t.length;s>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var o in t)if(_.has(t,o)&&e.call(i,t[o],o,t)===n)return};_.map=_.collect=function(t,e,n){var i=[];return null==t?i:h&&t.map===h?t.map(e,n):($(t,function(t,r,s){i[i.length]=e.call(n,t,r,s)}),i)};var O="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return i&&(e=_.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if($(t,function(t,s,o){r?n=e.call(i,n,t,s,o):(n=t,r=!0)}),!r)throw new TypeError(O);return n},_.reduceRight=_.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),d&&t.reduceRight===d)return i&&(e=_.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var s=t.length;if(s!==+s){var o=_.keys(t);s=o.length}if($(t,function(a,u,c){u=o?o[--s]:--s,r?n=e.call(i,n,t[u],u,c):(n=t[u],r=!0)}),!r)throw new TypeError(O);return n},_.find=_.detect=function(t,e,n){var i;return z(t,function(t,r,s){return e.call(n,t,r,s)?(i=t,!0):void 0}),i},_.filter=_.select=function(t,e,n){var i=[];return null==t?i:m&&t.filter===m?t.filter(e,n):($(t,function(t,r,s){e.call(n,t,r,s)&&(i[i.length]=t)}),i)},_.reject=function(t,e,n){return _.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},_.every=_.all=function(t,e,i){e||(e=_.identity);var r=!0;return null==t?r:v&&t.every===v?t.every(e,i):($(t,function(t,s,o){return(r=r&&e.call(i,t,s,o))?void 0:n}),!!r)};var z=_.some=_.any=function(t,e,i){e||(e=_.identity);var r=!1;return null==t?r:g&&t.some===g?t.some(e,i):($(t,function(t,s,o){return r||(r=e.call(i,t,s,o))?n:void 0}),!!r)};_.contains=_.include=function(t,e){return null==t?!1:w&&t.indexOf===w?-1!=t.indexOf(e):z(t,function(t){return t===e})},_.invoke=function(t,e){var n=a.call(arguments,2),i=_.isFunction(e);return _.map(t,function(t){return(i?e:t[e]).apply(t,n)})},_.pluck=function(t,e){return _.map(t,function(t){return t[e]})},_.where=function(t,e,n){return _.isEmpty(e)?n?null:[]:_[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},_.findWhere=function(t,e){return _.where(t,e,!0)},_.max=function(t,e,n){if(!e&&_.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&_.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return $(t,function(t,r,s){var o=e?e.call(n,t,r,s):t;o>=i.computed&&(i={value:t,computed:o})}),i.value},_.min=function(t,e,n){if(!e&&_.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&_.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return $(t,function(t,r,s){var o=e?e.call(n,t,r,s):t;i.computed>o&&(i={value:t,computed:o})}),i.value},_.shuffle=function(t){var e,n=0,i=[];return $(t,function(t){e=_.random(n++),i[n-1]=i[e],i[e]=t}),i};var E=function(t){return _.isFunction(t)?t:function(e){return e[t]}};_.sortBy=function(t,e,n){var i=E(e);return _.pluck(_.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index<e.index?-1:1}),"value")};var L=function(t,e,n,i){var r={},s=E(e||_.identity);return $(t,function(e,o){var a=s.call(n,e,o,t);i(r,a,e)}),r};_.groupBy=function(t,e,n){return L(t,e,n,function(t,e,n){(_.has(t,e)?t[e]:t[e]=[]).push(n)})},_.countBy=function(t,e,n){return L(t,e,n,function(t,e){_.has(t,e)||(t[e]=0),t[e]++})},_.sortedIndex=function(t,e,n,i){n=null==n?_.identity:E(n);for(var r=n.call(i,e),s=0,o=t.length;o>s;){var a=s+o>>>1;r>n.call(i,t[a])?s=a+1:o=a}return s},_.toArray=function(t){return t?_.isArray(t)?a.call(t):t.length===+t.length?_.map(t,_.identity):_.values(t):[]},_.size=function(t){return null==t?0:t.length===+t.length?t.length:_.keys(t).length},_.first=_.head=_.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:a.call(t,0,e)},_.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},_.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},_.rest=_.tail=_.drop=function(t,e,n){return a.call(t,null==e||n?1:e)},_.compact=function(t){return _.filter(t,_.identity)};var M=function(t,e,n){return $(t,function(t){_.isArray(t)?e?o.apply(n,t):M(t,e,n):n.push(t)}),n};_.flatten=function(t,e){return M(t,e,[])},_.without=function(t){return _.difference(t,a.call(arguments,1))},_.uniq=_.unique=function(t,e,n,i){_.isFunction(e)&&(i=n,n=e,e=!1);var r=n?_.map(t,n,i):t,s=[],o=[];return $(r,function(n,i){(e?i&&o[o.length-1]===n:_.contains(o,n))||(o.push(n),s.push(t[i]))}),s},_.union=function(){return _.uniq(u.apply(i,arguments))},_.intersection=function(t){var e=a.call(arguments,1);return _.filter(_.uniq(t),function(t){return _.every(e,function(e){return _.indexOf(e,t)>=0})})},_.difference=function(t){var e=u.apply(i,a.call(arguments,1));return _.filter(t,function(t){return!_.contains(e,t)})},_.zip=function(){for(var t=a.call(arguments),e=_.max(_.pluck(t,"length")),n=Array(e),i=0;e>i;i++)n[i]=_.pluck(t,""+i);return n},_.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},_.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=_.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(w&&t.indexOf===w)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},_.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},_.range=function(t,e,n){1>=arguments.length&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,s=Array(i);i>r;)s[r++]=t,t+=n;return s},_.bind=function(t,e){if(t.bind===j&&j)return j.apply(t,a.call(arguments,1));var n=a.call(arguments,2);return function(){return t.apply(e,n.concat(a.call(arguments)))}},_.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},_.bindAll=function(t){var e=a.call(arguments,1);return 0===e.length&&(e=_.functions(t)),$(e,function(e){t[e]=_.bind(t[e],t)}),t},_.memoize=function(t,e){var n={};return e||(e=_.identity),function(){var i=e.apply(this,arguments);return _.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},_.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},_.defer=function(t){return _.delay.apply(_,[t,1].concat(a.call(arguments,1)))},_.throttle=function(t,e){var n,i,r,s,o=0,a=function(){o=new Date,r=null,s=t.apply(n,i)};return function(){var u=new Date,c=e-(u-o);return n=this,i=arguments,0>=c?(clearTimeout(r),r=null,o=u,s=t.apply(n,i)):r||(r=setTimeout(a,c)),s}},_.debounce=function(t,e,n){var i,r;return function(){var s=this,o=arguments,a=function(){i=null,n||(r=t.apply(s,o))},u=n&&!i;return clearTimeout(i),i=setTimeout(a,e),u&&(r=t.apply(s,o)),r}},_.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},_.wrap=function(t,e){return function(){var n=[t];return o.apply(n,arguments),e.apply(this,n)}},_.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},_.after=function(t,e){return 0>=t?e():function(){return 1>--t?e.apply(this,arguments):void 0}},_.keys=x||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)_.has(t,n)&&(e[e.length]=n);return e},_.values=function(t){var e=[];for(var n in t)_.has(t,n)&&e.push(t[n]);return e},_.pairs=function(t){var e=[];for(var n in t)_.has(t,n)&&e.push([n,t[n]]);return e},_.invert=function(t){var e={};for(var n in t)_.has(t,n)&&(e[t[n]]=n);return e},_.functions=_.methods=function(t){var e=[];for(var n in t)_.isFunction(t[n])&&e.push(n);return e.sort()},_.extend=function(t){return $(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},_.pick=function(t){var e={},n=u.apply(i,a.call(arguments,1));return $(n,function(n){n in t&&(e[n]=t[n])}),e},_.omit=function(t){var e={},n=u.apply(i,a.call(arguments,1));for(var r in t)_.contains(n,r)||(e[r]=t[r]);return e},_.defaults=function(t){return $(a.call(arguments,1),function(e){if(e)for(var n in e)null==t[n]&&(t[n]=e[n])}),t},_.clone=function(t){return _.isObject(t)?_.isArray(t)?t.slice():_.extend({},t):t},_.tap=function(t,e){return e(t),t};var k=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof _&&(t=t._wrapped),e instanceof _&&(e=e._wrapped);var r=c.call(t);if(r!=c.call(e))return!1;switch(r){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var s=n.length;s--;)if(n[s]==t)return i[s]==e;n.push(t),i.push(e);var o=0,a=!0;if("[object Array]"==r){if(o=t.length,a=o==e.length)for(;o--&&(a=k(t[o],e[o],n,i)););}else{var u=t.constructor,l=e.constructor;if(u!==l&&!(_.isFunction(u)&&u instanceof u&&_.isFunction(l)&&l instanceof l))return!1;for(var f in t)if(_.has(t,f)&&(o++,!(a=_.has(e,f)&&k(t[f],e[f],n,i))))break;if(a){for(f in e)if(_.has(e,f)&&!o--)break;a=!o}}return n.pop(),i.pop(),a};_.isEqual=function(t,e){return k(t,e,[],[])},_.isEmpty=function(t){if(null==t)return!0;if(_.isArray(t)||_.isString(t))return 0===t.length;for(var e in t)if(_.has(t,e))return!1;return!0},_.isElement=function(t){return!(!t||1!==t.nodeType)},_.isArray=y||function(t){return"[object Array]"==c.call(t)},_.isObject=function(t){return t===Object(t)},$(["Arguments","Function","String","Number","Date","RegExp"],function(t){_["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),_.isArguments(arguments)||(_.isArguments=function(t){return!(!t||!_.has(t,"callee"))}),"function"!=typeof/./&&(_.isFunction=function(t){return"function"==typeof t}),_.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},_.isNaN=function(t){return _.isNumber(t)&&t!=+t},_.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},_.isNull=function(t){return null===t},_.isUndefined=function(t){return void 0===t},_.has=function(t,e){return l.call(t,e)},_.noConflict=function(){return t._=e,this},_.identity=function(t){return t},_.times=function(t,e,n){for(var i=Array(t),r=0;t>r;r++)i[r]=e.call(n,r);return i},_.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var A={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};A.unescape=_.invert(A.escape);var P={escape:RegExp("["+_.keys(A.escape).join("")+"]","g"),unescape:RegExp("("+_.keys(A.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(t){_[t]=function(e){return null==e?"":(""+e).replace(P[t],function(e){return A[t][e]})}}),_.result=function(t,e){if(null==t)return null;var n=t[e];return _.isFunction(n)?n.call(t):n},_.mixin=function(t){$(_.functions(t),function(e){var n=_[e]=t[e];_.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),H.call(this,n.apply(_,t))}})};var I=0;_.uniqueId=function(t){var e=++I+"";return t?t+e:e},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,S={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(t,e,n){var i;n=_.defaults({},n,_.templateSettings);var r=RegExp([(n.escape||T).source,(n.interpolate||T).source,(n.evaluate||T).source].join("|")+"|$","g"),s=0,o="__p+='";t.replace(r,function(e,n,i,r,a){return o+=t.slice(s,a).replace(R,function(t){return"\\"+S[t]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(o+="';\n"+r+"\n__p+='"),s=a+e.length,e
}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=Function(n.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(e)return i(e,_);var u=function(t){return i.call(this,t,_)};return u.source="function("+(n.variable||"obj")+"){\n"+o+"}",u},_.chain=function(t){return _(t).chain()};var H=function(t){return this._chain?_(t).chain():t};_.mixin(_),$(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=i[t];_.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],H.call(this,n)}}),$(["concat","join","slice"],function(t){var e=i[t];_.prototype[t]=function(){return H.call(this,e.apply(this._wrapped,arguments))}}),_.extend(_.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),i("underscore",[],function(){}),i("ventus/wm/modes/expose",["underscore","ventus/core/events"],function(t,e){"use strict";var n={register:function(){var e=this;console.log("Expose mode registered."),this.$el.addEventListener("contextmenu",t.throttle(function(){return"expose"!==e.mode?e.windows.length>0&&(e.mode="expose"):"expose"===e.mode&&(e.mode="default"),!1},1e3))},plug:function(){var t,n,i,r,s=Math.floor,o=Math.ceil,a=this,u=o(this.windows.length/2),c=s(this.width/u),l=s(this.height/2);this.$el.classList.add("expose");for(var f,h=0,p=this.windows.length;p>h;h++)f=this.windows[h],f.stamp(),t=f.height>f.width?f.height>l?l/f.height:1:f.width>c?c/f.width:1,t-=.15,r={x:h%u*c,y:(u>h?0:1)*l},n=r.x+s((c-t*f.width)/2),i=r.y+s((l-t*f.height)/2),f.enabled=!1,f.movable=!1,f.$el.classList.add("exposing"),f.$el.style.transformOrigin="0 0",f.$el.style.transform="scale("+t+")",f.$el.style.top=i+"px",f.$el.style.left=n+"px",e.onTransitionEnd(f.$el,function(){f.$el.classList.remove("exposing")},this);this.overlay=!0;var d=function(){a.$el.removeEventListener("click",d),a.mode="default"};this.$el.addEventListener("click",d)},unplug:function(){for(var t,n=this.windows.length;n--;){t=this.windows[n],t.restore(),t.$el.style.transform="scale(1)",t.$el.style.transformOrigin="50% 50%";var i=function(t){return function(){this.$el.classList.remove("expose"),t.$el.style.transform=""}}(t);e.onTransitionEnd(this.$el,i,this),t.movable=!0,t.enabled=!0}this.overlay=!1},actions:{focus:function(){},close:function(){this.mode="expose"},select:function(t){this.mode="default",t.focus()}}};return n}),i("ventus/wm/modes/fullscreen",[],function(){"use strict";var t={register:function(){console.log("Fullscreen mode registered.")},plug:function(){this.el.addClass("fullscreen");for(var t,e=0,n=this.windows.length;n>e;e++)t=this.windows[e],t.move(0,0),t.el.css("-webkit-transform","translate3d(0, 0, 0);"),t.resize(this.el.width(),this.el.height())},unplug:function(){for(var t,e=this.windows.length;e--;){t=this.windows[e],t.restore(),t.el.css("transform","scale(1)"),t.el.css("transform-origin","50% 50%");var n=function(t){return function(){this.el.removeClass("fullscreen"),t.el.css("transform","")}}(t);this.el.onTransitionEnd(n,this),t.movable=!0,t.resizable=!0,t.enabled=!0}this.overlay=!1},actions:{focus:function(){},close:function(){this.mode="expose"},select:function(t){this.mode="default",t.focus()}}};return t}),i("ventus/wm/windowmanager",["$","ventus/wm/window","ventus/wm/modes/default","ventus/wm/modes/expose","ventus/wm/modes/fullscreen"],function(t,e,n,i,r){"use strict";var s=function(){this.$el=document.createElement("div"),this.$el.classList.add("wm-space"),this.$el.innerHTML='<div class="wm-overlay" />',document.body.insertAdjacentElement("afterBegin",this.$el),this.$overlay=this.$el.querySelector(".wm-overlay"),this.$overlay.style.zIndex=this._baseZ-1,this.actions.forEach(function(t){this[t]=function(t){return function(){this.currentMode.actions[t]&&this.currentMode.actions[t].apply(this,arguments)}}.call(this,t)},this);for(var t in this.modes)this.modes.hasOwnProperty(t)&&this.modes[t].register&&this.modes[t].register.apply(this);this.windows=[],this.active=null,this.mode="default",this.createWindow.fromQuery=this.createWindow.fromQuery.bind(this),this.createWindow.fromElement=this.createWindow.fromElement.bind(this)};return s.prototype={actions:["focus","blur","close","maximize","minimize","restore","select"],modes:{"default":n,expose:i,fullscreen:r},set mode(t){var e=this.modes[t];e&&this._mode!==t&&(this._mode&&this.currentMode.unplug&&this.currentMode.unplug.apply(this),e.plug&&e.plug.apply(this),this._mode=t)},get mode(){return this._mode},get currentMode(){return this.modes[this._mode]},set overlay(t){this.$overlay.style.opacity=t?.8:0,this._overlay=t},get overlay(){return this._overlay},get width(){return this.$el.offsetWidth},get height(){return this.$el.offsetHeight},createWindow:function(t){var n=new e(t);return this.mode="default",n.signals.on("focus",this._focus,this),n.signals.on("blur",this._blur,this),n.signals.on("close",this._close,this),this.actions.forEach(function(t){n.signals.on(t,this[t],this)},this),this.windows.push(n),n.manager=this,n.focus(),n},_focus:function(t){var e,n,i=1e4,r=i+1e4;if(!this.active||this.active!==t){if(this.active?(e=this.active.z,this.active.blur()):e=i,n=this.windows.indexOf(t),this.windows.splice(n,1),this.windows.push(t),t.z=e+1,e>r+this.windows.length)for(var s,o=this.windows.length;o--;)s=this.windows[o].z,this.windows[o].z=i+(s-r);this.active=t}},_blur:function(t){this.active===t&&(this.active=null)},_close:function(t){var e,n=this.windows.indexOf(t);return-1===n?void console.log("Trying to close a window that doesn't exist in this window manager"):(this.windows.splice(n,1),e=this.windows.length,void(this.active&&this.active===t&&(this.active=0!==e?this.windows[e-1]:null,this.active&&this.active.focus())))}},s.prototype.createWindow.fromQuery=function(t,e){return e.content=document.querySelector(t),this.createWindow(e)},s.prototype.createWindow.fromElement=function(t,e){return e.content=t,this.createWindow(e)},s}),i("ventus",["require","exports","module","ventus/wm/windowmanager","ventus/wm/window"],function(t){"use strict";return{version:"0.2",browser:{animationEventName:function(){var t=document.body.style,e=null;return""===t.animation?e="animationend":""===t.MozAnimation?e="mozAnimationEnd":""===t.webkitAnimation&&(e="webkitAnimationEnd"),e}},WindowManager:t("ventus/wm/windowmanager"),Window:t("ventus/wm/window")}}),i("src/main",["almond","handlebars","ventus"],function(){}),i("$",function(){return t}),i("underscore",function(){return _}),n("ventus")});